{"version":3,"sources":["../../../../src/gatsby-node/on-create-node/on-create-node.js"],"names":["require","processNewDocsJsonNode","processNewMarkdownNode","cleanupMarkdownNode","docNodes","tocNode","onCreateNode","ocularOptions","node","actions","getNode","internal","type","module","exports"],"mappings":"AAAA,eAAiCA,OAAO,CAAC,sBAAD,CAAxC;AAAA,IAAOC,sBAAP,YAAOA,sBAAP;;AACA,gBAAsDD,OAAO,CAAC,0BAAD,CAA7D;AAAA,IAAOE,sBAAP,aAAOA,sBAAP;AAAA,IAA+BC,mBAA/B,aAA+BA,mBAA/B;;AAGA,IAAMC,QAAQ,GAAG,EAAjB;AACA,IAAIC,OAAO,GAAG,IAAd;;AAEA,SAASC,YAAT,OAAgDC,aAAhD,EAA+D;AAAA,MAAxCC,IAAwC,QAAxCA,IAAwC;AAAA,MAAlCC,OAAkC,QAAlCA,OAAkC;AAAA,MAAzBC,OAAyB,QAAzBA,OAAyB;AAE7DP,EAAAA,mBAAmB,CAAC;AAACK,IAAAA,IAAI,EAAJA,IAAD;AAAOC,IAAAA,OAAO,EAAPA,OAAP;AAAgBC,IAAAA,OAAO,EAAPA;AAAhB,GAAD,EAA2BH,aAA3B,CAAnB;;AAEA,UAAQC,IAAI,CAACG,QAAL,CAAcC,IAAtB;AACE,SAAK,gBAAL;AACA,SAAK,KAAL;AAIEV,MAAAA,sBAAsB,CAAC;AAACM,QAAAA,IAAI,EAAJA,IAAD;AAAOC,QAAAA,OAAO,EAAPA,OAAP;AAAgBC,QAAAA,OAAO,EAAPA;AAAhB,OAAD,EAA2BH,aAA3B,EAA0CH,QAA1C,EAAoDC,OAApD,CAAtB;AACA;;AAEF,SAAK,UAAL;AACEA,MAAAA,OAAO,GAAGJ,sBAAsB,CAAC;AAACO,QAAAA,IAAI,EAAJA,IAAD;AAAOC,QAAAA,OAAO,EAAPA,OAAP;AAAgBC,QAAAA,OAAO,EAAPA;AAAhB,OAAD,EAA2BH,aAA3B,EAA0CH,QAA1C,CAAhC;AACA;;AAEF;AAbF;AAeD;;AAEDS,MAAM,CAACC,OAAP,GAAiBR,YAAjB","sourcesContent":["const {processNewDocsJsonNode} = require('./process-nodes-json');\nconst {processNewMarkdownNode, cleanupMarkdownNode} = require('./process-nodes-markdown');\n\n// TODO - avoid globals\nconst docNodes = {};\nlet tocNode = null;\n\nfunction onCreateNode({node, actions, getNode}, ocularOptions) {\n  // Add missing fields to markdown nodes\n  cleanupMarkdownNode({node, actions, getNode}, ocularOptions);\n\n  switch (node.internal.type) {\n    case 'MarkdownRemark':\n    case 'Mdx':\n      // Note: MarkdownRemark nodes are created by the gatsby-transformer-remark\n      // markdown parser. These are different from the original file nodes\n      // for the markdown files created by the gatsby-source-filesystem plugin.\n      processNewMarkdownNode({node, actions, getNode}, ocularOptions, docNodes, tocNode);\n      break;\n\n    case 'DocsJson':\n      tocNode = processNewDocsJsonNode({node, actions, getNode}, ocularOptions, docNodes);\n      break;\n\n    default:\n  }\n}\n\nmodule.exports = onCreateNode;\n"],"file":"on-create-node.js"}