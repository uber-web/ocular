{"version":3,"sources":["../../../../src/react/components/table-of-contents.component.jsx"],"names":["SafeLink","active","depth","index","hasChildren","isTocOpen","id","name","path","toggleEntry","startsWith","renderRoute","route","tocState","children","chapters","entries","updatedId","concat","length","title","routeInfo","height","map","childRoute","idx","remark","childMdx","frontmatter","target","fields","slug","isSelected","ControlledToc","tree"],"mappings":"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","sourcesContent":["/* eslint-disable prefer-const */\n// Copyright (c) 2018 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React from 'react';\nimport {Link} from 'gatsby';\n\nimport {TocChevron, TocHeader, TocLink, TocEntry, TocSubpages} from '../styled/toc';\n\n// sub components of the TOC\n\n// This component only creates a Link component if clicking on that Link will\n// effectively change routes. If no path is passed or if the path is not\n// usable then it just renders a div. That should not be the case\n\nconst SafeLink = ({\n  active,\n  depth,\n  index,\n  hasChildren,\n  isTocOpen,\n  id,\n  name,\n  path,\n  toggleEntry = () => {}\n}) => {\n  // Gatsby <Link> element emmits warning if \"external\" links are used\n  // \"internal\" links start with `/`\n  // https://github.com/gatsbyjs/gatsby/issues/11243\n  if (path && !path.startsWith('/')) {\n    path = `/${path}`; // eslint-disable-line\n  }\n\n  return (\n    <TocEntry $depth={depth} $index={index} title={name} onClick={() => toggleEntry(id)}>\n      {hasChildren && <TocChevron $depth={depth} $isTocOpen={isTocOpen} />}\n      {!path || typeof path !== 'string' ? (\n        <TocHeader $depth={depth}>{name}</TocHeader>\n      ) : (\n        <TocLink $depth={depth} $active={active}>\n          <Link to={path} title={name}>\n            {name}\n          </Link>\n        </TocLink>\n      )}\n    </TocEntry>\n  );\n};\n\nconst renderRoute = ({route, id, index, depth, tocState, toggleEntry}) => {\n  const children = route.chapters || route.entries || [];\n  const updatedId = id.concat(index);\n\n  // parts of the TOC with children\n\n  if (children.length) {\n    const name = route.title;\n    const routeInfo = tocState[updatedId];\n    return (\n      <div key={index}>\n        <SafeLink\n          depth={depth}\n          index={index}\n          hasChildren\n          isTocOpen={routeInfo && routeInfo.height > 0}\n          id={updatedId}\n          name={name}\n          /* uncomment to have the entry act as link to its first child */\n          /* path={routeInfo && routeInfo.pathToFirstChild} */\n          toggleEntry={toggleEntry}\n        />\n        <TocSubpages $height={routeInfo && routeInfo.height}>\n          {children.map((childRoute, idx) => {\n            return renderRoute({\n              depth: depth + 1,\n              id: updatedId,\n              index: idx,\n              route: childRoute,\n              tocState,\n              toggleEntry\n            });\n          })}\n        </TocSubpages>\n      </div>\n    );\n  }\n\n  // leaves\n\n  const remark = route.childMdx;\n  // first syntax is toc for documentation, second is toc for examples\n  const name = (remark && remark.frontmatter && remark.frontmatter.title) || route.title;\n  const target = (remark && remark.fields && remark.fields.slug) || route.path;\n  return (\n    <div key={index}>\n      <li>\n        <SafeLink\n          active={tocState[updatedId] && tocState[updatedId].isSelected === true}\n          depth={depth}\n          name={name}\n          path={target}\n        />\n      </li>\n    </div>\n  );\n};\n\nconst ControlledToc = ({tree, tocState, toggleEntry}) => {\n  return (\n    <>\n      {tree.map((route, index) =>\n        renderRoute({\n          route,\n          index,\n          depth: 0,\n          tocState,\n          toggleEntry,\n          id: []\n        })\n      )}\n    </>\n  );\n};\n\nexport default ControlledToc;\n"],"file":"table-of-contents.component.js"}